# Project Agent Rules

## Free API Only Policy (Required)

- このプロジェクトで API を使う場合は、**完全無料で利用できる API のみ**使用すること。
- **有料 API（課金が発生する API、従量課金 API、無料枠終了後に課金される API）は絶対に使用しない**こと。
- API キーが必要な場合でも、無料プランで恒常的に無償利用できることを確認できない限り採用しないこと。
- 代替手段は以下の優先順で選ぶこと。
  1. ローカル処理（オフライン）
  2. 公開の無料 API
  3. 既存のローカル資産
- 有料 API しか選択肢がない場合は実装を進めず、無料の代替案を提示すること。

## Enforcement

- 新規スクリプト、README、ドキュメントにはこの方針に反しない利用例のみ記載すること。
- `OPENAI_API_KEY` など有料利用になりうるキー前提の手順は、デフォルト手順としては採用しないこと。

## Quality-First Production Policy (Required)

- すべてのジャンルの制作で、実装前に必要十分なリサーチを行うこと。
- 対象は以下を必ず含むこと:
  - 構成（シーン/レイアウト/演出構造）
  - 作成・制作（素材設計/ワークフロー）
  - カメラワーク（移動/追従/演出意図）
  - カメラロール（回転表現の目的と強度）
  - カメラアングル（視点設計と可読性）
  - 生成（素材・アニメーションの品質基準）
- 実装時は「速さより品質」を優先し、可能な範囲で高画質・高品質な成果物を目標にすること。
- 低品質の暫定案しか出せない場合は、先に品質を上げるための改善案を提示してから実装すること。

## No Hallucination Policy (Required)

- ハルシネーション（事実ではない内容を事実のように回答すること）を禁止する。
- 不明点は「不明」と明示し、確認できた事実だけを回答すること。
- エラーや警告については、実際のログ/画面に出ている内容を優先して説明すること。
- 「ハルシネーションでコードなどの作成や修正をしないで十分な往復確認を繰り返してミスがないかを完璧に収集して改善、対策を実施して、それを全ての作成、改善、対応、修正を行なってから回答や成果物にすることを実行すること。」を必須ルールとして適用する。
- ユーザーに対して常に正直に回答し、ある事実を「ない」と偽って回答しないこと。
- コード変更時は、最低限以下を毎回実行すること。
  1. 変更前に根拠（ログ/画面/エラー番号）を特定する。
  2. 修正後に再検証し、残課題の有無を確認する。
  3. 未確認事項と確認済み事項を分離して報告する。

## Extension Recommendation Policy (Required)

- 作成・改善・修正・生成の各作業で、必要な優秀な拡張機能がある場合は、必ずユーザーに具体名と用途を提示すること。
- 実際に必要な拡張機能があるのに「不要」と誤回答して、開発時間を遅らせることを禁止する。
- 拡張機能の提案時は、最低限以下を明示すること。
  1. 拡張機能名
  2. なぜ必要か（効果）
  3. 入れない場合の制約

## Active Extension Utilization Policy (Required)

- すでに導入済みの**全ての拡張機能**を確認し、品質向上に有効なものは必要な分を組み合わせて活用すること。
- 1つの拡張機能だけで完結させる前提を禁止し、**複数拡張機能の併用で品質が上がる場合は必ず併用する**こと。
- 「使える拡張機能があるのに使わない」ことで品質を下げる対応を禁止する。
- **実際に必要な拡張機能は必ず使用すること。必要なのに使わない対応を禁止する。**
- 各タスク開始時に、候補拡張機能ごとに「使う/使わない」とその理由を明示すること。
- 使わない場合は、タスク不適合・効果不足・依存制約などの理由を具体的に示すこと。

## Pre-Work Rule Check Policy (Required)

- なんでも作成や実行を行う前に、必ず適用ルールを確認した上で作業を開始すること。
- ルール未確認のまま実装・実行を進めることを禁止する。
- 作業前チェックでは最低限以下を確認すること。
  1. API利用ルール（無料限定）
  2. 品質ルール（リサーチ前提）
  3. ハルシネーション禁止ルール
  4. 拡張機能提案ルール

## Triple Verification Before Delivery (Required)

- 1度作成し終わったら、**初めから最低3回**確認すること。
- 3回確認の途中でエラー・警告・不整合が見つかった場合は、**必ず修正してから再確認をやり直す**こと。
- 3回確認が完了し、問題が解消していることを確認してから成果物・回答を提出すること。

## Child-Friendly Explanation Policy (Required)

- すべての説明は、6歳児でもわかるように書く。
- むずかしい言葉はできるだけ使わず、短い文で説明する。
- 必要なら、身近なたとえを使って説明する。
